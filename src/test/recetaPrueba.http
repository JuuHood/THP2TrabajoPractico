@baseUrl = http://localhost:3000
@token =eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJqdWxpQGV4YW1wbGUuY29tIiwicm9sZSI6InVzZXIiLCJpYXQiOjE3NjM3NTA4NzMsImV4cCI6MTc2Mzc1MTc3M30.cPtIWHm3-hijHQqXgUatSxDrmDoKZ477EPx0st1K-A0
@refreshToken =

###############################################
# üîê AUTENTICACI√ìN
###############################################

### 1) Registrar usuario
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "nombre": "Juli",
  "email": "juli@example.com",
  "password": "123456"
}

###

### 2) Login usuario
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "juli@example.com",
  "password": "123456"
}

# Despu√©s de correr esto:
# 1. Copiar el accessToken y pegarlo arriba en @token = ...
# 2. Copiar el refreshToken y pegarlo arriba en @refreshToken = ...

###

### 3) Renovar access token (refresh)
POST {{baseUrl}}/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

# Cuando el accessToken expire (15min), usar este endpoint
# Copiar el NUEVO accessToken de la respuesta y actualizarlo arriba

###

### 4) ERROR: Refresh sin token
POST {{baseUrl}}/api/auth/refresh
Content-Type: application/json

{}

###

### 5) ERROR: Refresh con token inv√°lido
POST {{baseUrl}}/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "token_invalido_xyz123"
}

###

### 6) ERROR: Login con email inexistente
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "noexiste@example.com",
  "password": "123456"
}

###

### 7) ERROR: Login con contrase√±a incorrecta
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "juli@example.com",
  "password": "contrase√±a_incorrecta"
}

###

### 8) ERROR: Login sin email
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "password": "123456"
}

###

### 9) ERROR: Login sin contrase√±a
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "juli@example.com"
}

###

###############################################
# üç≥ RECETAS - CRUD
###############################################

### 10) Obtener todas las recetas (protegido con JWT)
GET {{baseUrl}}/api/recetas
Authorization: Bearer {{token}}

###

### 11) Crear una receta nueva
POST {{baseUrl}}/api/recetas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nombre": "Tarta de verduras",
  "ingredientes": "Harina, huevo, acelga, cebolla",
  "instrucciones": "Saltear cebolla, mezclar todo, hornear 30 minutos."
}

###

### 12) Obtener una receta por ID
GET {{baseUrl}}/api/recetas/2
Authorization: Bearer {{token}}

###

### 13) Actualizar una receta
PUT {{baseUrl}}/api/recetas/2
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nombre": "Tarta de verduras (actualizada)",
  "ingredientes": "Harina, huevo, acelga, cebolla, queso",
  "instrucciones": "Mezclar, agregar queso y hornear 35 minutos."
}

###

### 14) Borrar una receta
DELETE {{baseUrl}}/api/recetas/2
Authorization: Bearer {{token}}

###

### 15) Exportar recetas a CSV
GET {{baseUrl}}/api/recetas/exportar
Authorization: Bearer {{token}}

###

### 16) Borrar TODAS las recetas (solo si NODE_ENV === "test")
DELETE {{baseUrl}}/api/recetas/all
Authorization: Bearer {{token}}

###

###############################################
# ‚ùå RECETAS - CASOS DE ERROR
###############################################

### 17) ERROR: Crear receta sin nombre
POST {{baseUrl}}/api/recetas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "ingredientes": "Harina, agua",
  "instrucciones": "Mezclar todo"
}

###

### 18) ERROR: Crear receta sin ingredientes
POST {{baseUrl}}/api/recetas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nombre": "Receta incompleta",
  "instrucciones": "Mezclar todo"
}

###

### 19) ERROR: Obtener receta inexistente
GET {{baseUrl}}/api/recetas/99999
Authorization: Bearer {{token}}
